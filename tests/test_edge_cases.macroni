# Test edge cases and special scenarios
@print("=== Edge Cases Tests ===");

# Empty function returns 0
fn empty_func() {
}
result = empty_func();
if result != 0 {
    @print("FAILED: Empty function should return 0, got", result);
    return;
}
@print("✓ Empty function");

# Function with only statements (no explicit return)
fn no_return(x) {
    y = x + 1;
}
result = no_return(5);
if result == null {
    @print("FAILED: no_return should not return null");
    return;
}
@print("✓ Function without explicit return");

# Deeply nested conditionals
x = 15;
result = 0;
if x > 10 {
    if x > 12 {
        if x > 14 {
            if x > 16 {
                result = 4;
            } else {
                result = 3;
            }
        } else {
            result = 2;
        }
    } else {
        result = 1;
    }
} else {
    result = 0;
}
if result != 3 {
    @print("FAILED: Deeply nested conditionals should give 3, got", result);
    return;
}
@print("✓ Deeply nested conditionals");

# Loop that never executes
executed = 0;
i = 10;
while i < 5 {
    executed = 1;
    i = i + 1;
}
if executed != 0 {
    @print("FAILED: Non-executing loop should not run");
    return;
}
@print("✓ Non-executing loop");

# Infinite loop with immediate break
counter = 0;
while 1 {
    counter = counter + 1;
    if counter == 1 {
        break;
    }
}
if counter != 1 {
    @print("FAILED: Loop with immediate break should have counter 1");
    return;
}
@print("✓ Immediate break");

# Null equality
n = null;
if n != null {
    @print("FAILED: n should be null");
    return;
}
@print("✓ Null equality");

# Boolean truthy/falsy
true_val = 1;
false_val = 0;
passed = 0;
if true_val {
    passed = 1;
}
if passed != 1 {
    @print("FAILED: true_val should be truthy");
    return;
}
passed = 1;
if false_val {
    passed = 0;
}
if passed != 1 {
    @print("FAILED: false_val should be falsy");
    return;
}
@print("✓ Boolean truthy/falsy");

# Empty list operations
empty_list = [];
if @len(empty_list) != 0 {
    @print("FAILED: Empty list length should be 0");
    return;
}
@print("✓ Empty list");

# Single element list
single = [42];
if @len(single) != 1 {
    @print("FAILED: Single element list length should be 1");
    return;
}
if single[0] != 42 {
    @print("FAILED: Single element should be 42");
    return;
}
@print("✓ Single element list");

# Recursive countdown
fn countdown(n) {
    if n <= 0 {
        return 0;
    } else {
        return countdown(n - 1);
    }
}
result = countdown(5);
if result != 0 {
    @print("FAILED: Recursive countdown should return 0");
    return;
}
@print("✓ Recursive countdown");

# Multiple return paths
fn multi_return(x) {
    if x > 0 {
        return 1;
    } else {
        if x < 0 {
            return -1;
        } else {
            return 0;
        }
    }
}
if multi_return(5) != 1 {
    @print("FAILED: multi_return(5) should be 1");
    return;
}
if multi_return(-3) != -1 {
    @print("FAILED: multi_return(-3) should be -1");
    return;
}
if multi_return(0) != 0 {
    @print("FAILED: multi_return(0) should be 0");
    return;
}
@print("✓ Multiple return paths");

@print("=== All Edge Case Tests Passed ===");
